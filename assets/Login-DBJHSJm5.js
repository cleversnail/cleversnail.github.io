import{r as x,o as D,a as c,t as w,b as h,c as k,d as u,n as I,e as n,w as m,f as Q,g as S,u as b}from"./index-DG5awykm.js";import{a as E,s as W}from"./index-C9nhHDE0.js";import{_ as F}from"./_plugin-vue_export-helper-DlAUqK2U.js";const J="data:image/png;base64,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",Y=["width","height"],K={__name:"verifyCode",props:{width:{type:Number,default:120},height:{type:Number,default:40},length:{type:Number,default:4}},setup(f,{expose:p}){const o=f,r=x({pool:"abcdefghijklmnopqrstuvwxyz0123456789",imgCode:""});D(()=>{r.imgCode=C()});const i=c(null),C=()=>{const e=i.value.getContext("2d");e.fillStyle=g(160,220),e.fillRect(0,0,o.width,o.height);let t="",A=o.length;for(let l=0;l<A;l++){const d=r.pool[s(0,r.pool.length)];t+=d;const v=s(18,40),a=s(-45,45);e.font=`${v}px SimHei`,e.textBaseline="top",e.fillStyle=g(80,160),e.save(),e.translate(30*l+15,15),e.rotate(Math.PI*a/180),e.fillText(d,-10,-15),e.restore()}for(let l=0;l<5;l++)e.beginPath(),e.moveTo(s(0,o.width),s(0,o.height)),e.lineTo(s(0,o.width),s(0,o.height)),e.strokeStyle=g(180,230),e.closePath(),e.stroke();for(let l=0;l<40;l++)e.beginPath(),e.arc(s(0,o.width),s(0,o.height),1,0,2*Math.PI),e.fillStyle=g(150,200),e.closePath(),e.fill();return t},s=(e,t)=>parseInt(Math.random()*(t-e)+e),g=(e,t)=>{const A=s(e,t),l=s(e,t),d=s(e,t);return`rgb(${A},${l},${d})`},B=()=>{r.imgCode=C()},y=w(r,"imgCode");return p({verifyCode:y}),(e,t)=>(h(),k("div",null,[u("canvas",{onClick:B,ref_key:"canvasRef",ref:i,width:o.width,height:f.height},null,8,Y)]))}},V={class:"login-register"},N={class:"tab"},O={key:0,class:"login"},U={style:{margin:"16px"}},L={key:1,class:"register"},q={style:{margin:"16px"}},H={__name:"Login",setup(f){const p=c(""),o=c(""),r=c(""),i=c("login"),C=c(null),s=b(),g=e=>{i.value=e},B=e=>{e.verifyCode===C.value.verifyCode&&E.post("/api/user/register",{username:e.username,password:e.password}).then(t=>{console.log(t),W(t.msg),i.value="login"})},y=async e=>{console.log(e);const t=await E.post("/api/user/login",{username:e.username,password:e.password});localStorage.setItem("token",t.data.token),s.push("/home")};return(e,t)=>{const A=Q("van-field"),l=Q("van-cell-group"),d=Q("van-button"),v=Q("van-form");return h(),k("div",V,[t[9]||(t[9]=u("div",{class:"logo"},[u("img",{src:J,alt:""})],-1)),u("div",N,[u("span",{class:I({active:i.value==="login"}),onClick:t[0]||(t[0]=a=>g("login"))},"登录",2),u("span",{class:I({active:i.value==="register"}),onClick:t[1]||(t[1]=a=>g("register"))},"注册",2)]),i.value==="login"?(h(),k("div",O,[n(v,{onSubmit:y},{default:m(()=>[n(l,{inset:""},{default:m(()=>[n(A,{modelValue:p.value,"onUpdate:modelValue":t[2]||(t[2]=a=>p.value=a),name:"username",label:"用户名",placeholder:"用户名",rules:[{required:!0,message:"请填写用户名"}]},null,8,["modelValue"]),n(A,{modelValue:o.value,"onUpdate:modelValue":t[3]||(t[3]=a=>o.value=a),type:"password",name:"password",label:"密码",placeholder:"密码",rules:[{required:!0,message:"请填写密码"}]},null,8,["modelValue"])]),_:1}),u("div",U,[n(d,{round:"",block:"",type:"primary","native-type":"submit"},{default:m(()=>t[7]||(t[7]=[S(" 登录 ")])),_:1})])]),_:1})])):(h(),k("div",L,[n(v,{onSubmit:B},{default:m(()=>[n(l,{inset:""},{default:m(()=>[n(A,{modelValue:p.value,"onUpdate:modelValue":t[4]||(t[4]=a=>p.value=a),name:"username",label:"用户名",placeholder:"用户名",rules:[{required:!0,message:"请填写用户名"}]},null,8,["modelValue"]),n(A,{modelValue:o.value,"onUpdate:modelValue":t[5]||(t[5]=a=>o.value=a),type:"password",name:"password",label:"密码",placeholder:"密码",rules:[{required:!0,message:"请填写密码"}]},null,8,["modelValue"]),n(A,{modelValue:r.value,"onUpdate:modelValue":t[6]||(t[6]=a=>r.value=a),type:"text",name:"verifyCode",label:"验证码",placeholder:"验证码",rules:[{required:!0,message:"请填写验证码"}]},{button:m(()=>[n(K,{ref_key:"verifyImgRef",ref:C},null,512)]),_:1},8,["modelValue"])]),_:1}),u("div",q,[n(d,{round:"",block:"",type:"primary","native-type":"submit"},{default:m(()=>t[8]||(t[8]=[S(" 注册 ")])),_:1})])]),_:1})]))])}}},j=F(H,[["__scopeId","data-v-81423a70"]]);export{j as default};
